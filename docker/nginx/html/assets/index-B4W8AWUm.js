import{u as I,r as i,aD as g,j as e}from"./index-Bqd9ntWg.js";import{C as T}from"./CreateAgentModal-EEgBbOL5.js";import{u as k,k as M}from"./query.gen-DycqmmC7.js";import{p as V}from"./avatar-DGIiPYzy.js";import{u as E}from"./workspaceContext-DM4ldxn7.js";import{U as S}from"./User-CUv3sm6S.js";import{b as O}from"./buildImageUrl-UU-AqGIw.js";import{s as p}from"./index-D_2ZsiUY.js";import{I as U}from"./ResponseCode-DASChpIM.js";import{a as W}from"./LeftOutlined-SuJsU2gG.js";import{B}from"./button-w-BhhqNe.js";import{R as L}from"./index-BIpk_xcc.js";import{T as $}from"./index-Bua754-M.js";import{C as q}from"./index-Cvh1Rscw.js";import{I as D}from"./index-BjgghHgF.js";import{T as f}from"./index-Bm_C5b8n.js";import{E as K}from"./index-C81jIois.js";import"./index-BesF1Zzs.js";import"./useZIndex-CxNEmHgd.js";import"./asyncToGenerator-C_d2R9__.js";import"./compact-item-BLNrSCAv.js";import"./render-CvJz5-Mq.js";import"./EllipsisOutlined-DJ-lU4UH.js";import"./SwapOutlined-BPIwuBYF.js";function ps(){const h=I(),[t,x]=i.useState(""),[u,m]=i.useState(!1),[j,b]=i.useState(0),o=E(),{data:a,refetch:c}=k({...M({query:{tab:j},headers:{"Workspace-id":(o==null?void 0:o.id)||""}})}),l=i.useMemo(()=>{var s;return((s=a==null?void 0:a.data)==null?void 0:s.filter(r=>{var d,n;return((d=r==null?void 0:r.name)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))||((n=r==null?void 0:r.description)==null?void 0:n.toLowerCase().includes(t.toLowerCase()))}))||[]},[a==null?void 0:a.data,t]),N=[{key:"0",label:"全部"},{key:"1",label:"系统"},{key:"2",label:"来自分享"},{key:"3",label:"我的"}],y=s=>{console.log(s),b(Number(s))},v=()=>{m(!0)},C=()=>{m(!1)},w=i.useCallback(async s=>{console.log("New Agent:",s),(await g({body:s,headers:{"Workspace-id":(o==null?void 0:o.id)||""}})).error?p.error("agent创建失败"):(p.success("agent创建成功"),c()),m(!1)},[c,o]),A=s=>{h(`/agent/${s}`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Agents管理"}),e.jsx(U,{placeholder:"搜索",prefix:e.jsx(W,{}),style:{width:300},value:t,onChange:s=>x(s.target.value)}),Number(o==null?void 0:o.role)!==S.Normal&&e.jsx(B,{type:"primary",icon:e.jsx(L,{}),onClick:v,children:"新建Agent"})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx($,{defaultActiveKey:"0",className:"flex-grow",items:N,onChange:y})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l==null?void 0:l.map(s=>e.jsx(q,{className:"hover:shadow-md transition-shadow",onClick:()=>A(s.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{preview:!1,src:O(s.icon)||V,alt:"图标",width:40,height:40,className:"mr-4 rounded"}),e.jsx("h3",{className:"text-lg font-semibold m-2",children:s.name})]}),e.jsx("p",{className:"text-gray-500 mt-4 mb-2 line-clamp-3",children:s.description})]}),e.jsxs("div",{children:[(s==null?void 0:s.shareTip)&&e.jsx(f,{color:"blue",className:"!mt-2",children:"已分享"}),(s==null?void 0:s.status)===0&&e.jsx(f,{color:"gold",className:"!mt-2",children:"未发布"})]})]})},s.id))}),l.length===0&&e.jsx(K,{description:"暂无数据"}),e.jsx(T,{visible:u,onCancel:C,onOk:w})]})}export{ps as default};
