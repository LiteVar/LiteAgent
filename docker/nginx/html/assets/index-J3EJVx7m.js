import{u as h,j as e,R as o,p as u,s as j}from"./index-Bqd9ntWg.js";import{L as g}from"./logo-DI8TcUuy.js";import{u as f,g as w}from"./query.gen-DycqmmC7.js";import{I as a,R as N}from"./ResponseCode-DASChpIM.js";import{F as t}from"./index-BesF1Zzs.js";import{I as b}from"./index-BjgghHgF.js";import{B as c}from"./button-w-BhhqNe.js";import"./LeftOutlined-SuJsU2gG.js";import"./asyncToGenerator-C_d2R9__.js";import"./compact-item-BLNrSCAv.js";import"./useZIndex-CxNEmHgd.js";import"./render-CvJz5-Mq.js";import"./SwapOutlined-BPIwuBYF.js";const C=()=>{const[i]=t.useForm(),d=h(),{data:m}=f({...w({})}),l=(m==null?void 0:m.data)===1,x=(r,s)=>!s||i.getFieldValue("password")===s?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致")),p=async r=>{var n;const s=await u({query:{email:r.email,username:r.username,password:r.password}});((n=s==null?void 0:s.data)==null?void 0:n.code)===N.S_OK&&(j(s.data.data),window.location.href=o.DASHBOARD)};return e.jsxs("div",{className:"min-h-screen bg-[#F0F3F7] flex flex-col justify-center sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md flex items-center justify-center mb-16",children:[e.jsx(b,{className:"mr-8 h-12 w-auto",src:g,alt:"LiteAgent"}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"LiteAgent"})]}),l&&e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"text-base text-center mb-12",children:"系统已经初始化完成，请点击下方按钮登录"}),e.jsx(c,{type:"primary",size:"large",className:"w-full",onClick:()=>d(o.LOGIN),children:"登录"})]}),!l&&e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"text-base text-center mb-12",children:"请设置系统的第一个用户"}),e.jsx("div",{className:"px-4 sm:rounded-lg sm:px-10",children:e.jsxs(t,{form:i,name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:p,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("label",{className:"w-24 text-right text-base mr-6",children:"账号:"}),e.jsx(t.Item,{style:{marginBottom:0,width:"266px"},name:"email",rules:[{required:!0,message:"请输入您的账号"},{type:"email",message:"请输入正确的邮箱地址"}],children:e.jsx(a,{placeholder:"请输入您的账号"})})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("label",{className:"w-24 text-right text-base mr-6",children:"昵称:"}),e.jsx(t.Item,{style:{marginBottom:0,width:"266px"},name:"username",rules:[{required:!0,message:"请输入您的昵称"}],children:e.jsx(a,{placeholder:"请输入您的昵称"})})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("label",{className:"w-24 text-right text-base mr-6",children:"新密码:"}),e.jsx(t.Item,{style:{marginBottom:0,width:"266px"},name:"password",rules:[{required:!0,message:"请输入您的新密码"}],children:e.jsx(a,{type:"password",placeholder:"请再次输入新密码"})})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("label",{className:"w-24 text-right text-base mr-6",children:"新密码确认:"}),e.jsx(t.Item,{style:{marginBottom:0,width:"266px"},name:"confirmPassword",rules:[{required:!0,message:"请再次输入新密码"},{validator:x}],children:e.jsx(a,{type:"password",placeholder:"请再次输入新密码"})})]}),e.jsx(t.Item,{children:e.jsx(c,{type:"primary",htmlType:"submit",size:"large",className:"w-full mt-12",children:"登录"})})]})})]})]})};export{C as default};
