import{f as N,u as C,r as l,j as e}from"./index-Bqd9ntWg.js";import{L as E}from"./logo-DI8TcUuy.js";import{u as b,a as k,c as $}from"./query.gen-DycqmmC7.js";import{s as A}from"./index-D_2ZsiUY.js";import"./render-CvJz5-Mq.js";import"./asyncToGenerator-C_d2R9__.js";import"./useZIndex-CxNEmHgd.js";const Q=()=>{var p,h,f,g,j,u,v;const n=N().pathname,o=(p=n==null?void 0:n.split("/"))==null?void 0:p[2],r=N().pathname.split("/")[4],w=C(),[m,d]=l.useState(!1),{data:t,isLoading:W,isError:J}=b({...k({})}),{data:a}=b({...$({path:{id:r}}),enabled:!!r}),x=l.useMemo(()=>{var s;const i=(s=t==null?void 0:t.data)==null?void 0:s.some(c=>c.id===o);return i&&d(!1),i},[t==null?void 0:t.data,o]),y=l.useCallback(i=>{var s,c;i.stopPropagation(),(c=(s=a==null?void 0:a.data)==null?void 0:s.agent)!=null&&c.shareFlag?x?(d(!1),w(`/dashboard/${o}/chat/${r}`)):d(!0):A.error("agent不存在，无法继续对话")},[o,r,x,a]);return e.jsx("div",{className:"w-full flex h-[100vh] items-center justify-center overflow-hidden",children:e.jsx("div",{className:"flex items-center h-full",children:e.jsxs("div",{className:"max-w-[400px] break-all px-4 flex flex-col items-center justify-center",children:[e.jsx("img",{className:"w-[82px] h-[82px] rounded-md mb-12",src:((f=(h=a==null?void 0:a.data)==null?void 0:h.agent)==null?void 0:f.icon)||E}),e.jsx("div",{className:"text-6 mb-8",children:(j=(g=a==null?void 0:a.data)==null?void 0:g.agent)==null?void 0:j.name}),e.jsx("div",{className:"text-base text-[#C2C2C2] mb-24",children:(v=(u=a==null?void 0:a.data)==null?void 0:u.agent)==null?void 0:v.description}),e.jsx("div",{onClick:y,className:`w-[331px] h-[61px] text-white text-2xl bg-[#2A82E4] flex items-center justify-center ${m?"opacity-70 cursor-not-allowed":"cursor-pointer"}`,children:"开始聊天"}),e.jsx("div",{className:`text-[#ff4d4f] text-sm mt-2 ${m?"opacity-100":"opacity-0"}`,children:"agent需要加入workspace才能使用，请联系管理员"})]})})})};export{Q as default};
